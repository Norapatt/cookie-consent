<script>
  // ถ้าเว็บไซต์ถูกเปิดผ่าน http:// ให้ redirect ไป https://
  if (location.protocol !== 'https:') {
    location.href = 'https:' + window.location.href.substring(window.location.protocol.length);
  }

  function setCookie(name, value, days) {
    const d = new Date();
    d.setTime(d.getTime() + days * 24 * 60 * 60 * 1000);
    const expires = "expires=" + d.toUTCString();
    document.cookie = name + "=" + value + ";" + expires + ";path=/";
  }

  function getCookie(name) {
    const cname = name + "=";
    const decodedCookie = decodeURIComponent(document.cookie);
    const ca = decodedCookie.split(";");
    for (let i = 0; i < ca.length; i++) {
      let c = ca[i].trim();
      if (c.indexOf(cname) === 0) return c.substring(cname.length);
    }
    return "";
  }

  window.onload = function () {
    // ถ้าคุกกี้เคยถูกตั้งไว้แล้ว ให้รีไดเรกต์ทันที
    if (getCookie("cookieAccepted") === "true") {
      window.location.href = "https://sites.google.com/view/guroti469?usp=sharing";
      return;
    }
    // ถ้ายังไม่มีกุกกี้ ให้แสดง popup พร้อมพื้นหลัง
    document.getElementById("cookie-consent-popup").style.display = "flex";
    document.body.classList.add("show-background");
  };

  const checkbox = document.getElementById("accept-checkbox");
  const btnAccept = document.getElementById("accept-cookies");

  checkbox.addEventListener("change", function () {
    btnAccept.disabled = !this.checked;
  });

  btnAccept.addEventListener("click", function () {
    if (checkbox.checked) {
      setCookie("cookieAccepted", "true", 365);
      window.location.href = "https://sites.google.com/view/guroti469?usp=sharing";
    }
  });
</script>



</body>
</html>


